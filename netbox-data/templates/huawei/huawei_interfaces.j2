{# Este template recibe una interfaz individual como contexto #}
{% if intf.name %}
interface {{ intf.name }}
{% if intf.description %} description {{ intf.description }}{% endif %}
 
{# --- INICIO DE CORRECCIÓN PARA IPv4 --- #}
{% set ipv4_addresses = intf.ip_addresses.all() | selectattr('family', 'equalto', 4) %}
{% for ip in ipv4_addresses %}
 ip address {{ ip.address.ip }} {{ ip.address.netmask }}
{% endfor %}
{# --- FIN DE CORRECCIÓN PARA IPv4 --- #}

 ipv6 enable

{# Direcciones IPv6 #}
{% set ipv6_addresses = intf.ip_addresses.all() | selectattr('family', 'equalto', 6) %}
{% for ip in ipv6_addresses %}
 ipv6 address {{ ip.address }}
{% endfor %}

 undo shutdown
quit
{% endif %}
